# 課題07 PHP2 汎用情報登録機能DB版
## ①課題内容（PHP2）
- 商品等各種情報登録の機能を作成（csv保存）
- 画面遷移：
-- item_add.php（登録・更新・削除 受付） ⇨ item_write.php（保存・更新・削除処理） ⇨  item_read.php（一覧表示）
　　　　　　※一覧表示明細の商品コードでitem_add.php(更新モード)にリンク
　　　　　　※商品コードでitem_add.php(更新モード)：　更新ボタン→データ更新、削除ボタン→データ削除
　　　　　　※一覧表示に検索条件の項目を設け、データ抽出機能を作成（item_read.phpに自己遷移）
      
## ②工夫した点・こだわった点
- 管理用のID自動採番する機能を作成(JSONに保存、プレフィックス毎に連番管理）　※前作踏襲
- 画像保存機能を作成　※各レコード毎に１枚上限、更新時削除の上、再更新
- データ更新時に項目を取得するselect文及び削除の機能を共通関数化
- Jqueryで値の入力チェックを行うと、何もしなければエラー検出後も処理を走らせてしまうため、エラーの場合は処理を止めるコードを実装した
 

## ③質問・疑問
- 別ファイルからの共通関数呼び出しは本処理関数毎に記述したが、同一ファイル内であれば関数外に外出しして読込をまとめてもよかったかも
```
require_once(共通外部ファイル) //←ここにまとめてもよかったかも

function test1() {
  require_once(共通外部ファイル) //現行、個々の関数内に記述しているが(1)・・・
  ・・・
}

function test２() {
  require_once(共通外部ファイル) //現行、個々の関数内に記述しているが(２)・・・
  ・・・
}

```


## ④その他（感想、シェアしたいことなんでも）
- サーバー上に保存した画像ファイルを削除するボタンを追加したかったがJQuery(Javascript)での実装は断念した。（PHPのsubmitはレコード更新用、各要素の更新はJavascriptと区別したかったが、Javascriptでサーバー上のファイルを処理するのは難しそうだったので断念。Laravelだとこのあたりの機能は実装されているのか・・？）
- 日付によるデータ検索は、今回、日付値の大小で比較したが、実装した後にラーニングシステムの動画で日付文字列でひっかけていたのを確認。こちらのほうが簡単そうだったが、日付の書式が変わった場合に修正が必要になるかなと気になった。どちらが一般的なのか・・？
- とにかく、画像をサーバーにあげる形式はデータの更新と同期を取ったり削除・更新の処理が大変だった。これもLaravelだと上手くやってくれることに期待。


